
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trusted data - Compliant systems - Confident decisions</title>

  <!-- ✅ Chart.js (UMD build) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    /* ===================== EXECUTIVE LIGHT THEME (WHITE) ===================== */
    :root{
      /* Core palette */
      --bg:#ffffff;
      --panel:#ffffff;
      --ink:#0f172a;
      --muted:#64748b;
      --line:#e5e7eb;

      /* Accents (charts/buttons) */
      --accent:#10b981;    /* teal/green */
      --accent-2:#6366f1;  /* indigo */
      --accent-3:#f59e0b;  /* amber */
      --accent-4:#ef4444;  /* red */
      --accent-5:#06b6d4;  /* cyan */

      /* Elevation & radii */
      --gap:12px;
      --radius:14px;
      --shadow:0 10px 24px rgba(15,23,42,.08);
      --shadow-strong:0 12px 36px rgba(15,23,42,.12);
    }

    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{
      background: var(--bg);
      color: var(--ink);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      letter-spacing:.2px;
    }

    /* =========================== Header ============================ */
    header{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding:16px 22px; position:sticky; top:0; z-index:10;
      backdrop-filter:saturate(1.1) blur(4px);
      background: rgba(255,255,255,.85);
      border-bottom:1px solid var(--line);
      box-shadow: var(--shadow-strong);
      text-align:center;
    }
    .title-wrap{
      display:flex; align-items:center; gap:10px; justify-content:center;
    }
    header h1{margin:0; font-size:20px; font-weight:800; letter-spacing:.3px; color:#111827}
    .tag{
      background: #f0f9ff; color:#0c4a6e; border:1px solid #bae6fd;
      padding:4px 8px; border-radius:999px; font-size:11px; font-weight:600;
    }

    /* ========================== Page Layout ========================= */
    .page{padding:16px 22px; max-width:1400px; margin:0 auto}
    .grid{display:grid; gap:var(--gap)}
    .grid.kpi{grid-template-columns:repeat(12, minmax(0,1fr))}
    .grid.charts{grid-template-columns:repeat(12, minmax(0,1fr))}
    .grid.agents{grid-template-columns:repeat(12, minmax(0,1fr))}

    /* ============================ Cards ============================ */
    .card{
      background: var(--panel);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:12px;
    }
    .card .title{
      margin:0 0 8px; font-size:14px; color:#0f172a; font-weight:700;
      display:flex; align-items:center; gap:8px;
    }
    .muted{color:var(--muted)}
    .sep{height:1px; background:var(--line); margin:8px 0}

    /* ============================ KPIs ============================ */
    .kpi-tile{display:flex; flex-direction:column; gap:6px; padding:4px 0}
    .kpi-value{font-size:26px; font-weight:800; color:#0f172a}
    .kpi-label{font-size:12px; color:#64748b}
    .badge{
      display:inline-block; padding:2px 8px; border-radius:999px;
      background:#f1f5f9; color:#0f172a; border:1px solid var(--line);
      font-size:11px;
    }

    /* ======================= Agent mini-cards ====================== */
    .agent-card{
      display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center;
      min-height:120px;
    }
    .mini-chart-wrap{
      width:160px; height:110px;
      display:flex; align-items:center; justify-content:center;
      border-left:1px dashed var(--line); padding-left:8px; background:#fafafa;
      border-top-right-radius:var(--radius); border-bottom-right-radius:var(--radius);
    }
    .mini-chart{width:150px; height:100px;}

    /* ====================== Summary small charts =================== */
    .small-chart-wrap{ height:220px; background:#fafafa; border-radius:12px; }
    .small-chart{ width:100%; height:200px !important; }

    /* =========================== Responsive ======================== */
    @media (max-width: 1140px){
      .mini-chart-wrap{display:none}
      .agent-card{grid-template-columns: 1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="title-wrap">
      <h1>Trusted data - Compliant systems - Confident decisions</h1>
      <span class="tag">Powered by AI Agents</span>
    </div>
    <!-- No subheading; no export buttons -->
  </header>

  <main class="page">
    <!-- ===== Global KPIs (Top row) ===== -->
    <section class="grid kpi">
      <div class="card" style="grid-column: span 6;">
        <div class="kpi-tile">
          <div class="kpi-value" id="kpiUsers">200</div>
          <div class="kpi-label">Total Users</div>
        </div>
      </div>
      <div class="card" style="grid-column: span 6;">
        <div class="kpi-tile">
          <div class="kpi-value" id="kpiRisk">43</div>
          <div class="kpi-label">Average Risk (All)</div>
        </div>
      </div>
    </section>

    <!-- ===== Summary charts (Second row: ONLY ONE TILE) ===== -->
    <section class="grid charts" style="margin-top:12px;">
      <div class="card" style="grid-column: span 12;">
        <h3 class="title">Risk Score Distribution</h3>
        <div class="small-chart-wrap"><canvas class="small-chart" id="riskChart"></canvas></div>
      </div>
    </section>

    <!-- ===== Agent mini-cards (order updated) ===== -->
    <section class="grid agents" style="margin-top:12px;">
      <!-- 1) ID Data Extractor & DQ -->
      <div class="card agent-card" style="grid-column: span 4;">
        <div>
          <h3 class="title">ID Data Extractor &amp; DQ</h3>
          <div class="muted" id="iddqMeta">200 documents</div>
          <div class="sep"></div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; font-size:12px;">
            <div><span class="badge">DQ Pass % <strong id="iddqPassPct">86%</strong></span></div>
            <div><span class="badge">ID mismatch % <strong id="iddqMismatchPct">9%</strong></span></div>
            <div><span class="badge">Address present % <strong id="iddqAddrPresentPct">70%</strong></span></div>
            <div><span class="badge">DOB valid % <strong id="iddqDobValidPct">96%</strong></span></div>
            <div><span class="badge">Top failure <strong id="iddqTopFailure">ID number mismatch</strong></span></div>
          </div>
        </div>
        <div class="mini-chart-wrap"><canvas class="mini-chart" id="iddqDocMixChart"></canvas></div>
      </div>

      <!-- 2) Address Validator -->
      <div class="card agent-card" style="grid-column: span 4;">
        <div>
          <h3 class="title">Address Validator</h3>
          <div class="muted" id="addrMeta">200 records</div>
          <div class="sep"></div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; font-size:12px;">
            <div><span class="badge"><strong id="addrValidated">200</strong> Validated</span></div>
            <div><span class="badge"><strong id="addrDup">12</strong> Duplicates</span></div>
            <div><span class="badge">Avg Risk <strong id="addrAvg">33.8</strong></span></div>
            <div><span class="badge">Top Flag <strong id="addrTop">ApartmentMissing</strong></span></div>
            <div><span class="badge">High‑risk % <strong id="addrHighRiskPct">8%</strong></span></div>
          </div>
        </div>
        <div class="mini-chart-wrap"><canvas class="mini-chart" id="addressClassChart"></canvas></div>
      </div>

      <!-- 3) Document Parser -->
      <div class="card agent-card" style="grid-column: span 4;">
        <div>
          <h3 class="title">Document Parser</h3>
          <div class="muted" id="parseMeta">200 documents</div>
          <div class="sep"></div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; font-size:12px;">
            <div><span class="badge">Mandatory complete % <strong id="parseMandatoryComplete">78%</strong></span></div>
            <div><span class="badge">Any mandatory missing % <strong id="parseMandatoryMissing">22%</strong></span></div>
            <div><span class="badge">Avg mandatory missing <strong id="parseMandatoryMissingAvg">0.4</strong></span></div>
            <div><span class="badge">Avg optional captured <strong id="parseOptionalPresentAvg">5.1</strong></span></div>
            <div><span class="badge">Top missing mandatory <strong id="parseTopMissingMandatory">effective_date</strong></span></div>
          </div>
        </div>
        <div class="mini-chart-wrap"><canvas class="mini-chart" id="parseMandatoryChart"></canvas></div>
      </div>

      <!-- 4) Data Contract Validator (renamed from Data Validation) -->
      <div class="card agent-card" style="grid-column: span 4;">
        <div>
          <h3 class="title">Data Contract Validator</h3>
          <div class="muted" id="dcvMeta">200 dataset</div>
          <div class="sep"></div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; font-size:12px;">
            <div><span class="badge">Pass % <strong id="dcvPass">93%</strong></span></div>
            <div><span class="badge">Fail % <strong id="dcvFail">7%</strong></span></div>
            <div><span class="badge">Avg issues/failed <strong id="dcvAvgPerFail">2.1</strong></span></div>
            <div><span class="badge">Multi‑category fails % <strong id="dcvMultiCatPct">28%</strong></span></div>
          </div>
        </div>
        <div class="mini-chart-wrap"><canvas class="mini-chart" id="dcvChart"></canvas></div>
      </div>

      <!-- 5) Dormant Pension Accounts (renamed from Dormant Accounts) -->
      <div class="card agent-card" style="grid-column: span 4;">
        <div>
          <h3 class="title">Dormant Pension Accounts</h3>
          <div class="muted" id="dormMeta">200 accounts</div>
          <div class="sep"></div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; font-size:12px;">
            <div><span class="badge">Dormant % <strong id="dormPct">30%</strong></span></div>
            <div><span class="badge">Remediable % <strong id="dormRemedPct">75%</strong></span></div>
          </div>
        </div>
        <div class="mini-chart-wrap"><canvas class="mini-chart" id="dormChart"></canvas></div>
      </div>
    </section>
  </main>

  <!-- ====================== JS (static data + charts) ====================== -->
  <script>
    /* Chart helpers with optional percentage axis */
    function makeDoughnut(id, labels, data, title){
      const el = document.getElementById(id);
      if (!el || !window.Chart) return;
      new Chart(el, {
        type:'doughnut',
        data:{ labels, datasets:[{ data, backgroundColor:['#10b981','#6366f1','#f59e0b','#ef4444','#06b6d4','#22c55e'] }] },
        options:{
          responsive:true, maintainAspectRatio:false,
          plugins:{
            title: title ? { display:true, text:title, color:'#0f172a', font:{ size:12, weight:'600' } } : { display:false },
            legend:{ display:false },
            tooltip:{ enabled:true }
          },
          cutout:'58%'
        }
      });
    }
    function makeBar(id, labels, data, color='#10b981', title=null, isPercent=false){
      const el = document.getElementById(id);
      if (!el || !window.Chart) return;
      new Chart(el, {
        type:'bar',
        data:{ labels, datasets:[{ data, backgroundColor:color }] },
        options:{
          responsive:true, maintainAspectRatio:false,
          scales:{
            x:{ ticks:{ color:'#0f172a', font:{ size:10 } }, grid:{ display:false } },
            y:{
              beginAtZero:true,
              suggestedMax: isPercent ? 100 : undefined,
              ticks:{
                color:'#64748b',
                font:{ size:10 },
                callback: (value)=> isPercent ? value + '%' : value
              },
              grid:{ color:'rgba(226,232,240,.8)' }
            }
          },
          plugins:{
            legend:{ display:false },
            tooltip:{
              enabled:true,
              callbacks:{
                label: (ctx)=>{
                  const v = ctx.parsed.y;
                  return isPercent ? v.toFixed(1) + '%' : v;
                }
              }
            },
            title: title ? { display:true, text:title, color:'#0f172a', font:{ size:12, weight:'600' } } : { display:false }
          },
          categoryPercentage:.6, barPercentage:.6
        }
      });
    }

    /* ===== Summary: Risk Score Distribution (percent on Y-axis) ===== */
    // Across 200 users; non-monotonic shape (still low > medium > high overall)
    const riskLabels = ['0–19','20–39','40–59','60–79','80–99'];
    const riskCounts = [52, 44, 48, 34, 22]; // sum 200
    const riskPercents = riskCounts.map(c => +(((c / 200) * 100).toFixed(1)));
    makeBar('riskChart', riskLabels, riskPercents, '#10b981', null, true);

    /* ===== Address Validator: Classification donut ===== */
    makeDoughnut(
      'addressClassChart',
      ['Residential','Commercial','PO Box','Invalid'],
      [112, 58, 18, 12],
      'Address Classification'
    );

    /* ===== Data Contract Validator: Failure categories donut ===== */
    makeDoughnut('dcvChart', ['Schema','Null','Timestamp'], [11, 13, 10], 'Failure Categories');

    /* ===== Dormant Pension Accounts: Remediation potential donut ===== */
    // Cooked: total users = 200; dormant = 60 (30%); remediable among dormant = 45 (75%)
    const dormantTotal = 60, remediable = 45, notRemediable = dormantTotal - remediable;
    makeDoughnut('dormChart', ['Remediable','Not Remediable'], [remediable, notRemediable], 'Dormant Remediation Potential');

    /* ===== Document Parser: Mandatory field missing counts (5 labels) ===== */
    makeBar(
      'parseMandatoryChart',
      ['policy_number','insured_name','effective_date','premium_amount','currency'],
      [8, 12, 28, 6, 4],
      '#6366f1',
      'Mandatory Fields Missing',
      false
    );

    /* ===== ID Data Extractor & DQ: Document type mix (bar) ===== */
    // Cooked totals = 200 => Passport 110, Driving Licence 80, Other 10
    makeBar(
      'iddqDocMixChart',
      ['Passport','Driving Licence','Other'],
      [110, 80, 10],
      '#f59e0b',
      'Document Type Mix',
      false
    );
  </script>
</body>
</html>
