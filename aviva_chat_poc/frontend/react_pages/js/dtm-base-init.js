(o=>{o.DTMUtils={initialized:!1,baseSettings:{selectors:{coveoPager:".CoveoPager",coveoSearchRoot:".search",dtmBaseScript:"#dtm-base-script",errorSection:".article-hero, h1",html:"html",loggedInMasthead:".o-masthead-logged-in",primaryNav:".m-primary-navigation",searchInput:'input[name="q"]'},classes:{babelPolyfillLoaded:"babel-polyfill-loaded",megaMenu:"a-button--tertiary",viewAllMenu:"m-primary-navigation-sub-section__item--links-list",primaryNavSection:"m-primary-navigation__section",primaryNavSectionHeading:"m-primary-navigation__section-heading",promoCard:"m-card-content__inner--bottom",viewAllMenuLink:"m-primary-navigation-sub-section__link",errorSearchInput:"search__input--error-search"},attributes:{async:"async",dataInitImmediately:"data-init-immediately"},constants:{DTM_MEGA_MENU_EVENT:"globalnav_interaction",PROMO_CARD:"promo card"},pageNameKey:"pageName",loggedInStatus:"logged-in",loggedOutStatus:"logged-out"},init(){var e,t;DTMUtils.initialized||(e=!document.querySelector(this.baseSettings.selectors.dtmBaseScript).hasAttribute(this.baseSettings.attributes.async),t=(t=document.querySelector(this.baseSettings.selectors.searchInput))?!t.classList.contains(this.baseSettings.classes.errorSearchInput):null,void 0!==o.digitalDataSubset&&(this.processInitialData(o.digitalDataSubset),e||"loading"!==document.readyState?this.processPageData():document.addEventListener("DOMContentLoaded",this.processPageData.bind(this))),t&&this.savePageName(),DTMUtils.initialized=!0)},savePageName(){void 0!==o.digitalData&&void 0!==o.digitalData.page&&sessionStorage.setItem("pageName",this.getPageName(o.digitalData.page))},getPageName(e){var t,a=[];for(t in e){var i=e[t];0===t.indexOf("navLevel")&&a.push(i)}return a.join(":")},processInitialData(){o.digitalData=o.digitalDataSubset,delete o.digitalDataSubset},processPageData(){o.digitalData=this.processDataSubset(o.digitalData),this.checkLoggedIn()},processDataSubset(e){return o.digitalData=this.updateWithSearch(e),this.updateWithErrorMessage(e)},checkLoggedIn(){var e;document.querySelectorAll(this.baseSettings.selectors.loggedInMasthead).length&&(e=document.querySelector(this.baseSettings.selectors.loggedInMasthead).dataset.mastheadLoggedinCookie,-1!==document.cookie.indexOf(e))&&(digitalData.page.loginStatus=this.baseSettings.loggedInStatus)},updateWithSearch(g){if("undefined"!=typeof Coveo&&void 0!==g.search){let e=Coveo.$$(document),r=e.find(this.baseSettings.selectors.coveoSearchRoot),o=e.find(this.baseSettings.selectors.coveoPager),l=this;Coveo.$$(r).on("deferredQuerySuccess",(e,t)=>{var{results:t,query:a,queryBuilder:i}=t,s=Coveo.get(o),n=l.getAndDeletePageNameFromStorage();l.deepExtend(g.search,{pageNum:s.currentPage,resultsDisplayed:t.results.length,term:Coveo.state(r,"q"),totalPages:Math.ceil(t.totalCountFiltered/i.numberOfResults),totalResults:t.totalCountFiltered,facet:a.tab}),n&&(g.search.location=n)})}return g},getAndDeletePageNameFromStorage(){var e=sessionStorage.getItem(this.baseSettings.pageNameKey);return sessionStorage.removeItem(this.baseSettings.pageNameKey),e},deepExtend(e){let t,a;var i=e||{};for(t=1;t<arguments.length;t++)if(a=arguments[t])for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&("object"==typeof a[s]?i[s]=this.deepExtend(i[s],a[s]):i[s]=a[s]);return i},updateWithErrorMessage(e){var t;return void 0!==e.page.errorCode&&(t=document.querySelector(this.baseSettings.selectors.errorSection).textContent.replace(/\s+/g," ").trim().toLowerCase(),e.page.errorMessage=t),e},getNavLevels(){return this.getPropsFromObject(o.digitalData.page,"key").filter(e=>0===e.indexOf("navLevel")).reduce((e,t)=>(e[t]=o.digitalData.page[t],e),{})},getPropsFromObject(e,t){var a=[];let i,s;for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i="key"===t?s:e[s],a.push(i));return a},trackEvent(a){let i=()=>new Promise(t=>{!function e(){return Object.prototype.hasOwnProperty.call(o,"_satellite")?t():void setTimeout(e,500)}()}),s=document.querySelector(this.baseSettings.selectors.html),n=this,r=!!s.classList.contains(this.baseSettings.classes.babelPolyfillLoaded);"undefined"!=typeof _satellite?_satellite.track(a):void 0!==o.digitalData&&(r?i().then(()=>{_satellite.track(a)}):new MutationObserver((e,t)=>{s.classList.contains(n.baseSettings.classes.babelPolyfillLoaded)&&(r=!0,i().then(()=>{_satellite.track(a)}),t.disconnect())}).observe(s,{attributes:!0}))},findIndex(e){let t=-1,a=0,i=e.parentNode.firstElementChild;for(;i;){if(a++,i===e){t=a;break}i=i.nextElementSibling}return t},findAncestor(e,t){let a=e;for(;a&&!a.classList.contains(t);)a=a.parentElement;return a},megaMenuClickEvents(e){var t=e.target.classList,a=e.target.parentElement.classList,i=e.target.parentElement.parentElement.classList,{megaMenu:s,promoCard:n,viewAllMenuLink:r,primaryNavSectionHeading:o}=this.baseSettings.classes;t.contains(r)||t.contains(o)||a.contains(r)||a.contains(o)?this.updateWithViewAllMenu(e):(t.contains(s)||a.contains(n)||a.contains(s)||i.contains(n))&&this.updateWithMegaMenu(e)},updateWithMegaMenu(e){var t=this.baseSettings.classes.viewAllMenu,t=this.findAncestor(e.target,t),a=e.target.parentNode.parentNode,i=this.getMegaMainMenu(e),s=this.baseSettings.constants.PROMO_CARD,t=t?t.firstElementChild.innerText.trim():s,s={destinationUrl:e.target.href||e.target.parentElement.href,tabName:i.tabName,tabPosition:i.tabPosition,textCategory:t,text:e.target.parentElement.innerText.replace(/\/n/g,"").trim(),textPosition:this.findIndex(a)-1,menuType:this.settings.constants.MEGAMENU_NAV_TYPE};a.classList.contains(this.baseSettings.classes.promoCard)&&(s.textPosition=0),this.trackMegaMenu(s)},getMegaMainMenu(e){var t={},a=this.baseSettings.classes.primaryNavSection,e=this.findAncestor(e.target,a),a=`[aria-controls="${e.id}"]`,a=document.querySelector(a);return a?(t.tabName=a.innerText,t.tabPosition=this.findIndex(a.parentNode)):(a=e.firstElementChild,t.tabName=a.innerText,t.tabPosition=this.findIndex(a)),t},updateWithViewAllMenu(e){var t=this.getMegaMainMenu(e),t={destinationUrl:e.target.href||e.target.parentElement.href,tabName:t.tabName,tabPosition:t.tabPosition,textCategory:e.target.innerText.trim(),text:e.target.innerText,textPosition:1,menuType:this.settings.constants.MEGAMENU_NAV_TYPE};this.trackMegaMenu(t)},trackMegaMenu(e){o.digitalData.menu=e,o.digitalData.event=this.baseSettings.constants.DTM_MEGA_MENU_EVENT,this.trackEvent(o.digitalData.event)}};var e=DTMUtils.baseSettings.selectors.dtmBaseScript,t=DTMUtils.baseSettings.attributes.dataInitImmediately;"true"===document.querySelector(e).getAttribute(t)&&DTMUtils.init()})(window);